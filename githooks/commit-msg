#!/bin/bash

COMMIT_MSG_FILE="$1"
COMMIT_MSG=$(head -n 1 "$COMMIT_MSG_FILE")

KEYWORDS="Added Removed Fixed Updated Refactored Improved Docs Tested Chore Breaking"

if [[ "$COMMIT_MSG" != *:* ]]; then
  echo "‚ùå Le message doit contenir ':' apr√®s un mot-cl√©."
  echo "üìå Mots-cl√©s valides : $KEYWORDS"
  exit 1
fi

PREFIX=$(echo "$COMMIT_MSG" | cut -d ':' -f 1 | xargs)

if ! echo "$KEYWORDS" | grep -wq "$PREFIX"; then
  echo "‚ùå Mot-cl√© invalide '$PREFIX'. Utilise un des mots-cl√©s suivants :"
  echo "$KEYWORDS"
  exit 1
fi

exit 0
